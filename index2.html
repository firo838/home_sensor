<!doctype html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="description" content="家庭に導入するIoTセンサー開発">
	<meta name="viewport" content="width=device-width">
	<title>My Sensor | IoTセンサー開発HP</title>
	<link rel="stylesheet" media="all" href="docs/css/style.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
	<script src="docs/js/script.js"></script>
</head>

<body id="top">
	<div id="wrapper">

		<div id="sidebar">
			<div id="sidebarWrap">
				<h1><img src="docs/images2/logo.png" width="300" height="300" alt="logo"></h1>
				<nav id="mainnav">
					<p id="menuWrap"><a id="menu"><span id="menuBtn"></span></a></p>
					<div class="panel">
						<ul>
							<li><a href="#top">TOP</a></li>
							<li><a href="#sec01">Phylosophy</a></li>
							<li><a href="#sec02">Requirements</a></li>
							<li><a href="#sec03">Deverop Environment</a></li>
							<li><a href="#sec04">Visualization</a></li>
							<li><a href="#sec05">Design</a></li>
							<li><a href="#sec06">Develop</a></li>
							<li><a href="#sec07">Evalution</a></li>
							<li><a href="#sec08">Referrence</a></li>
							<li><a href="#sec09">Profile</a></li>
						</ul>
					</div>
				</nav>
			</div>
		</div>
		<div id="content">
			<p id="mainImg"><img src="docs/images2/mainImg.jpg" alt=""></p>
				<div class="innerTOP">
					<p>このサイトでは「電子工作」・「プログラミング」・「ネットワーク」の技術を用いて</p><p>自作IoTセンサーを導入することを目的とし，その制作について紹介するサイトです</p>
					<p>=> githubのページは<a href="https://github.com/firo838/home_sensor">こちら</a></p>
				</div>
			<!-- Phylosophy -->
			<section id="sec01">
				<header>
					<h2><span>Phylosophy</span></h2>
				</header>
				<div class="innerSS">
					<p>ICT(Information and Communication Technology)技術の進展によって生活の利便性が向上している。</p>
					<p>またIoT(Internet of Things)は様々なモノをインターネットに接続し，</p>
					<p>環境情報など様々なデータを取得し，蓄積・解析することで新たな発見を生み出すことによって</p>
					<p>より便利で快適な生活を送ることができる。</p>
					<p>家電などの家庭用機器にIoTセンサを導入することは実際ハードルが高い。</p>
					<p>そこで，簡易な組込みシステムを開発することができるマイコンの「Arduino」を使用して</p>
					<p>家庭にIoTセンサを導入しようと考えた。</p>
				</div>
			</section>
			<!-- // Phylosophy -->
			<!-- // Requirements -->
			<section id="sec02">
				<header>
					<h2><span>Requirements</span></h2>
				</header>
				<div class="innerSSM">
					<style>
					table {
						border-collapse: collapse;
						cellpadding="5";
						cellspacing="0";
					}
					td {
						border: solid 1px;
						padding: 0.5em;
					}
					</style>

					<p>センサを開発に使用したものの一覧。</p>
					<br>
					<table align="center">
						<tr style="background:#eeeeee">
							<td><b>機器</b></td>
							<td><b>名称</b></td>
							<td><b>購入サイト</b></td>
						</tr>
						<tr>
							<td>Arduino 本体 （互換品）</td>
							<td>サインスマート UNO R3 ATmega328P</td>
							<td><a href="https://www.amazon.co.jp/gp/product/B00E5WJSHK/ref=oh_aui_detailpage_o00_s00?ie=UTF8&psc=1">アマゾンリンク</a></td>
						</tr>
						<tr>
							<td>Arduino Uno Ethernet Shield （互換品）</td>
							<td>サインスマート（SainSmart）イーサネット シールド for Arduino UNO MEGA Duemilanove*ニューバージョンW5100* </td>
							<td><a href="https://www.amazon.co.jp/gp/product/B006J4FZTW/ref=ox_sc_act_title_4?ie=UTF8&psc=1&smid=A16L06BV5108TA">アマゾンリンク</a></td>
						</tr>
						<tr>
							<td>電流センサ</td>
							<td>クランプ式AC電流センサ30A</td>
							<td><a href="https://www.switch-science.com/catalog/840/">Switch Scienceリンク</a></td>
						</tr>
						<tr>
							<td>Arduinoシールド用ピンソケット</td>
							<td>Arduinoシールド用ピンソケットのセット(R3対応)</td>
							<td><a href="https://www.switch-science.com/catalog/995/">Switch Scienceリンク</a></td>
						</tr>
						<tr>
							<td>Arduino用バニラシールド基板</td>
							<td>Arduino用バニラシールド基板ver.2(青)</td>
							<td><a href="https://www.switch-science.com/catalog/991/">Switch Scienceリンク</a></td>
						</tr>
						<tr>
							<td>ジャック</td>
							<td>パネル基板付けイヤホンジャック【MJ352WO】</td>
							<td><a href="https://www.marutsu.co.jp/pc/i/40976/">マルツリンク</a></td>
						</tr>
						<tr>
							<td>抵抗モジュール</td>
							<td>小型酸金抵抗(MOS) 3W 10Ω【MOS3C100J】</td>
							<td><a href="https://www.marutsu.co.jp/pc/i/18270/">マルツリンク</a></td>
						</tr>
						<tr>
							<td>平行コード</td>
							<td>ビニル平行コード 黒 2.0sq【VFF黒2.0SQ】 </td>
							<td><a href="https://www.marutsu.co.jp/pc/i/8123/">マルツリンク</a></td>
						</tr>
						<tr>
							<td>コードコネクタ</td>
							<td>ベター小型コードコネクター(平形コード用)(ホワイト)【WH4515P】</td>
							<td><a href="https://www.marutsu.co.jp/pc/i/594003/">マルツリンク</a></td>
						</tr>
					</table>
				</div>
			</section>

			<!-- Requirements -->
			<!-- // Develop Environment -->
			<section id="sec03">
				<header>
					<h2><span>Develop Environment</span></h2>
				</header>
				<div class="innerT">
					<ul class="col4">
						<li>
							<p class="img"><img src="docs/images2/Arduino_IDE.png" width="168" height="168" alt=""></p>
							<p>「Arduino IDE」</p>
							<p>Version 1.8.3</p>
						</li>
						<li>
							<p class="img"><img src="docs/images2/macos_x.jpg" width="175" height="175" alt=""></p>
							<p>「macOS X」</p>
							<p>開発用PC</p>
						</li>
						<li>
							<p class="img"><img src="docs/images2/ubuntu.png" width="168" height="168" alt=""></p>
							<p>「Ubuntu16.04」</p>
							<p>サーバ用OS</p>
						</li>
					</ul>
				</div>
			</section>
			<!-- Develop Environment -->
			<!-- // Visualization -->
			<section id="sec04">
				<header>
					<h2><span>Visualization</span></h2>
				</header>
				<div class="innerS">
					<p>以下のツールセットを使用した。これらはElastic社によって提供されている。</p>
				</div>
				<div class="innerF">
					<ul class="col4">
						<li>
							<p class="img"><img src="docs/images2/logstash.png" width="168" height="168" alt=""></p>
							<p>「Logstash」</p>
							<p>ログ収集機能を持つ</p>
							<p>設定ファイルを記述することで独自の形式のログを解析・パースすることができる</p>
						</li>
						<li>
							<p class="img"><img src="docs/images2/elasticsearch.png" width="168" height="168" alt=""></p>
							<p>「Elasticsearch」</p>
							<p>全文検索エンジンを持つデータベース</p>
						</li>
						<li>
							<p class="img"><img src="docs/images2/kibana.png" width="168" height="168" alt=""></p>
							<p>「Kibana」</p>
							<p>データベースと連携し，ウェブブラウザ上で可視化する事ができる</p>
							<p>Logstash・Elasticsearchとともに使われることが多く，まとめて「Elastic Stack」とされる</p>
						</li>
					</ul>
				</div>
			</section>
			<!-- Visualization -->
			<!-- // Design -->
			<section id="sec05">
				<header>
					<h2><span>Design</span></h2>
				</header>
				<div class="innerFS">
					<div class="article">
						<p>全体概要</p>
						<p>開発したセンサの導入時の概略イメージを示す。</p>
						<div class="full"><img src="docs/images2/Overview.png" width="800" height="695" alt=""></div>
						<p></p>
					</div>
				</div>
			</section>
			<!-- Design -->
			<!-- Develop -->
			<section id="sec06">
				<header>
					<h2><span>Develop</span></h2>
				</header>
				<div class="innerS">
					<p>工事中</p>
				</div>
			</section>
			<!-- // Develop -->
			<!-- Evalution -->
			<section id="sec07">
				<header>
					<h2><span>Evalution</span></h2>
				</header>
				<div class="inner">
					<div class="article">
						<p>作成したセンサの評価をします</p>
						<p><b>◎評価に関して</b></p>
						<ol>
							<li><b>精度</b></li>
								<p>使用したセンサモジュールはアナログ値で電流を出力します。</p>
								<p>この電流値は15mA単位で計測され，A/D変換をして得られたデジタルの電流値に対して計算処理をして瞬時消費電力を算出します。</p>
								<p>最大30A（30000mA）であるので2000段階（30000mA/15mA）の電力量を表現することができます。</p>
								<p>100[V]×15[mA]=1.5[W]，100[V]×30000[mA]=3000[W]</p>
								<p>であるので，最小0Wから3000Wまでの消費電力を1.5W刻みで計測できる事になります。</p>
							<li><b>安定性</b></li>
								<p>データを送信するArduinoは，Ethernet.hをプログラムに組み込むことでTCPによるデータの送出を行いますが，Arduinoに電源を投入した瞬間（起動時）のTCPセッション生成が不安定である事があります。sleep関数を使用するなどして対処していますが，時々接続ができない現象が発生します。</p>
								<p>また，TCPで通信する際に必要なIPアドレスの取得をDHCPで行っていますが，開発環境においては安定せず，数回に一度程度正しく取得できていない現象が発生しています。調査していますが未だ原因は究明できておらず，今後の課題となっています。</p>
							<li><b>保守性</b></li>
								<p>今回開発のために使用したArduino UNOではアナログ入力を5ポート持っており，理論上5つのセンサを同時に接続して扱うことができます。</p>
								<p>可能であればセンサが故障している際に計測や処理を行わないなどのエラー処理を行う必要があると考えられます。</p>
						</ol>
					</div>
					<br>
					<div class="article">
						<p><b>◎展望/今後するべき改善点</b></p>
						<ol>
							<p><b>ハードウェアの改善</b></p>
								<li>新しいセンサの追加を容易にするため，接続部分のモジュール化</li>
								<li>センサ故障やネットワーク接続失敗に於けるエラー処理</li>
						</ol>
						<ol>
							<p><b>ソフトウェアの改善</b></p>
								<li>SSL通信などを使用してグローバルなネットワークを使用した際のセキュリティ確保</li>
								<li>Ethernet仕様時の通信開始安定性の改善</li>
								<li>センサの値異常時やハードウェア故障時のエラー処理及び通知</li>
								<li>データ送信回数を減らす（送信間隔を長くする）ために一度に送信できるデータを増やす</li>
						</ol>
						<ol>
							<p><b>活用方法</b></p>
								<li>統計的データの活用</li>
								<li>可視化データによる現状把握</li>
						</ol>
					</div>
				</div>
			</section>
			<!-- // Evalution -->
			<!-- Refference -->
			<section id="sec08">
				<header>
					<h2><span>Refference</span></h2>
				</header>
				<div class="innerSSS">
							<p><b>Logstash</b></p>
							<p>Logstash, <a href="https://www.elastic.co/products/logstash">https://www.elastic.co/products/logstash</a>, (参照日2018年2月18日)</p>
							<p>Logstash Configuration Example, <a href="https://www.elastic.co/guide/en/logstash/current/config-examples.html">https://www.elastic.co/guide/en/logstash/current/config-examples.html</a>, (参照日2018年2月18日)</p>
							<p>ubuntuにLogstashを入れる, <a href="https://qiita.com/duke-gonorego/items/be0307601a0dc15685e3">https://qiita.com/duke-gonorego/items/be0307601a0dc15685e3</a>, (参照日2018年2月18日)</p>
							<p>logstash-plugins/logstash-patterns-core, <a href="https://github.com/logstash-plugins/logstash-patterns-core/blob/master/patterns/grok-patterns">https://github.com/logstash-plugins/logstash-patterns-core/blob/master/patterns/grok-patterns</a>, (参照日2018年2月18日)</p>
							<p>LogstashでのGrokの始め方, <a href="https://qiita.com/tuneyukkie/items/75cbb4d44f901fec2188">https://qiita.com/tuneyukkie/items/75cbb4d44f901fec2188</a>, (参照日2018年2月18日)</p>
							<p>LogstashをインストールしてElasticsearchにデータを登録する, <a href="http://mamori017.hatenablog.com/entry/2017/04/21/173209">http://mamori017.hatenablog.com/entry/2017/04/21/173209</a>, (参照日2018年2月18日)</p>
							<br>
							<p><b>Elasticsearch</b></p>
							<p>Elasticsearch, <a href="https://www.elastic.co/jp/products/elasticsearch">https://www.elastic.co/jp/products/elasticsearch</a>, (参照日2018年2月18日)</p>
							<p>Install Elasticsearch with Debian Package, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.html</a>, (参照日2018年2月18日)</p>
							<p>Mapping, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html</a>, (参照日2018年2月18日)</p>
							<p>Elasticsearchのインストールからデータ投入まで, <a href="https://qiita.com/onlyzs/items/045fb33dbd6bd781ce23">https://qiita.com/onlyzs/items/045fb33dbd6bd781ce23</a>, (参照日2018年2月18日)</p>
							<p>Elasticsearchのお勉強 (Mapping編), <a href="https://qiita.com/kompiro/items/5abeae93dc386ab669bf">https://qiita.com/kompiro/items/5abeae93dc386ab669bf</a>, (参照日2018年2月18日)</p>
							<p>【基礎編】Elasticsearchの検索クエリを使いこなそう, <a href="https://developers.eure.jp/tech/elasticsearch_search_query/">https://developers.eure.jp/tech/elasticsearch_search_query/</a>, (参照日2018年2月18日)</p>
							<p>ElasticSearch インデックス一覧・マッピング一覧・マッピング設定, <a href="http://kenzo0107.hatenablog.com/entry/2015/10/08/113110">http://kenzo0107.hatenablog.com/entry/2015/10/08/113110</a>, (参照日2018年2月18日)</p>
							<p>Elasticsearchのクエリとフィルターで簡単な検索を試す例, <a href="https://easyramble.com/elasticsearch-queries-and-filters.html">https://easyramble.com/elasticsearch-queries-and-filters.html</a>, (参照日2018年2月18日)</p>
							<br>
							<p><b>Kibana</b></p>
							<p>Kibana, <a href="https://www.elastic.co/products/kibana">https://www.elastic.co/products/kibana</a>, (参照日2018年2月18日)</p>
							<br>
							<p><b>Arduino</b></p>
							<p>Arduino, <a href="https://www.arduino.cc/">https://www.arduino.cc/</a>, (参照日2018年2月18日)</p>
							<p>Ethernet / Ethernet 2 library, <a href="https://www.arduino.cc/en/Reference/Ethernet">https://www.arduino.cc/en/Reference/Ethernet</a>, (参照日2018年2月18日)</p>
				</div>
			</section>
			<!-- // Refference -->
			<!-- Refference -->
			<section id="sec09">
				<header>
					<h2><span>Profile</span></h2>
				</header>
				<div class="innerS">
					<p>Master course student.</p>
				</div>
			</section>
			<!-- // Refference -->

			<footer id="footer">
				<p>Copyright(c) 2017-2018 all right reserved.</p>
				<p>このサイトにおける内容によって生じたいかなる事故などについて責任を負いません</p>
			</footer>

		</div>
	</div>

</body>
</html>
